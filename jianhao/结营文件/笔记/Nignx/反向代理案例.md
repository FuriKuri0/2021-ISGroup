# 反向代理案例

可以隐藏服务器的ip地址（将ip地址绑定域名，浏览器端直接访问域名，即可实现隐藏服务器）

## 实现效果：

#### 使用nginx反向代理，根据访问不同的路径，自动转跳到不同的服务中

1.

准备：两个tomcat服务端，一个8081端口，一个8082端口

在8081端口的webapp下创建edu目录，存放a.html

在8082端口的webapp下创建vod目录，存放a.html



2.配置nignx

server_name 绑定的是服务器的ip或者域名

转跳：127.0.0.1为本机，绑定特定端口

![](https://raw.githubusercontent.com/JIaaoooo/ImageHostingService/main/img/%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86.png)

```
`~ /edu/`中的“~”是一种正则表达式的形式，表示当路径中有 “eud” 时，则转发到相应的路径去。
```

### 语法说明：

1. = ：用于不含正则表达式的 uri 前，要求请求字符串与 uri 严格匹配，如果匹配 成功，就停止继续向下搜索并立即处理该请求。

2. ~：用于表示 uri 包含正则表达式，并且区分大小写。

3. ~*：用于表示 uri 包含正则表达式，并且不区分大小写

   如果uri包含正则表达式，则必须含有~或者~*的标识

#### 总结优先级：(location =) > (location 完整路径) > (location ^~ 路径) > (location ,* 正则顺序) > (location 部分起始路径)

3.访问

![](%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%EF%BC%882%EF%BC%89.png)

端口号填写的是nginx的端口号